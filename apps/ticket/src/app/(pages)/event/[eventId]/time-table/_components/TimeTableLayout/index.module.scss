@use "@permit/design-system/styles/variables" as theme;

.timetable_wrapper {
  position: relative;
  display: flex;
  height: 100dvh;
  overflow: hidden;

  color: white;
  font-family: sans-serif;

  background-color: theme.$black;

  /* iOS 전용 최적화 */
  @supports (-webkit-overflow-scrolling: touch) {
    transform: translate3d(0, 0, 0);

    /* iOS 스크롤 버그 회피 */
    isolation: isolate;

    will-change: transform;

    /* iOS Safari에서만 적용 */
    -webkit-overflow-scrolling: touch;
    contain: layout style paint;
  }
}

.left_fixed_area {
  position: relative;
  z-index: 6;
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  width: 120px;

  background-color: theme.$black;

  /* iOS 최적화 */
  transform: translateZ(0);
  border-right: 1px solid theme.$gray-600;

  will-change: transform;

  @media (max-width: 768px) {
    position: relative; /* sticky 대신 relative 사용 */
    width: 80px;

    /* iOS에서 고정 영역의 떨림 방지 */
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
  }
}

.time_column_header {
  position: sticky;
  top: 0;
  z-index: 7;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 60px;

  font-weight: 600;
  font-size: 14px;

  background-color: theme.$black;
  border-right: 1px solid theme.$gray-600;
  border-bottom: 1px solid theme.$gray-600;
}

.right_scroll_area {
  display: flex;
  flex: 1;
  flex-direction: column;
  overflow: auto;
  scrollbar-width: none;

  &::-webkit-scrollbar {
    display: none;
  }

  /* iOS 스크롤 문제 해결을 위한 강력한 최적화 */
  @supports (-webkit-overflow-scrolling: touch) {
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;

    /* 레이어 최적화 */
    isolation: isolate;

    touch-action: manipulation;

    /* 렌더링 최적화 */
    will-change: scroll-position;

    /* iOS Safari 전용 */
    -webkit-overflow-scrolling: touch;

    /* 스크롤 최적화 */
    overscroll-behavior: none;
    scroll-behavior: auto;
    contain: layout style paint;

    /* iOS 14+ 최적화 */
    mask-image: radial-gradient(white, black);
  }

  /* 모바일에서 추가 최적화 */
  @media (max-width: 768px) {
    /* iOS 디바이스에서만 적용 */
    position: relative;
    z-index: 1;

    /* 스크롤 영역 명시적 정의 */
    height: calc(100dvh - 60px); /* 헤더 높이 제외 */
    min-height: 0;

    /* 터치 이벤트 최적화 */
    touch-action: pan-y;
    overscroll-behavior: auto none;
  }
}
